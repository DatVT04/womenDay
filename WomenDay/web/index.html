<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ch√∫c m·ª´ng ng√†y 8/3</title>
        <!-- Bootstrap CSS -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
        <!-- Font Awesome -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
        <!-- Animate.css -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
        <link href="assests/style.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <!-- Intro Screen -->
        <div id="intro">
            <h1 class="animate__animated animate__fadeInDown">Ch√∫c m·ª´ng Ng√†y Qu·ªëc t·∫ø Ph·ª• n·ªØ 8/3</h1>
            <button id="start-btn" class="animate__animated animate__bounceIn animate__delay-1s">Click me!!</button>
        </div>

        <!-- Main Content -->
        <div class="main-container" id="main-content">
            <!-- Card/Letter Section -->
            <div class="container">
                <div class="card-container">
                    <div class="card" id="greeting-card">
                        <div class="card-front">
                            <div>
                                <h2>T·ªõ c√≥ l·ªùi mu·ªën n√≥i v·ªõi c·∫≠u n√® ^.^</h2>
                                <p>Ch·∫°m nh·∫π v√†o thi·ªáp ƒë·ªÉ m·ªü n√® :></p>
                                <div class="mt-3">
                                    <i class="fas fa-hand-point-up fa-2x animate__animated animate__pulse animate__infinite"></i>
                                </div>
                            </div>
                        </div>
                        <div class="card-back">
                            <h3>G·ª≠i ƒë·∫øn c·∫≠u, ng∆∞·ªùi ph·ª• n·ªØ tuy·ªát v·ªùi!</h3>
                            <p class="message">
                                Nh√¢n ng√†y 8/3, xin g·ª≠i ƒë·∫øn c·∫≠u l·ªùi ch√∫c m·ª´ng t·ªët ƒë·∫πp nh·∫•t. C·∫£m ∆°n v√¨ t·∫•t c·∫£ nh·ªØng g√¨ c·∫≠u ƒë√£ l√†m, 
                                nh·ªØng n·ª• c∆∞·ªùi c·∫≠u mang l·∫°i v√† nƒÉng l∆∞·ª£ng t√≠ch c·ª±c c·∫≠u t·∫°o ra m·ªói ng√†y.
                            </p>
                            <p class="signature">Ch√∫c c·∫≠u m·ªôt ng√†y 8/3 th·∫≠t h·∫°nh ph√∫c!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gallery Section -->
            <div class="container gallery-container">
                <h2 class="gallery-title">·∫¢nh ƒë·∫πp n√®, tr·∫£ cho c·∫≠u ƒëo√° =))</h2>
                <div class="gallery">
                    <div class="gallery-item">
                        <img src="./uploads/img1.png" alt=""/>
                    </div>                
                    <div class="gallery-item">
                        <img src="./uploads/img2.png" alt=""/>
                    </div>
                    <div class="gallery-item">
                        <img src="./uploads/img3.png" alt=""/>
                    </div>
                    <div class="gallery-item">
                        <img src="./uploads/img4.png" alt=""/>
                    </div>
                    <div class="gallery-item">
                        <img src="./uploads/img5.png" alt=""/>
                    </div>
                    <div class="gallery-item">
                        <img src="./uploads/img6.png" alt=""/>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="message-section">
                    <h2>Tr√≤ ch∆°i gh√©p h√¨nh ƒë·∫∑c bi·ªát</h2>
                    <p class="text-center mb-4">H√£y gh√©p nh·ªØng m·∫£nh h√¨nh ƒë·ªÉ xem b·ª©c tranh k·ª∑ ni·ªám!</p>

                    <div class="puzzle-container" id="puzzle">
                        <!-- M·∫£nh gh√©p s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                    </div>

                    <div class="text-center mt-3">
                        <button id="shuffle-btn" class="btn btn-primary me-2">Tr·ªôn l·∫°i</button>
                        <button id="solve-btn" class="btn btn-success">Xem h√¨nh g·ªëc</button>
                    </div>

                    <div class="completion-message mt-4 text-center" id="completion" style="display: none;">
                        <h3>Ch√∫c m·ª´ng!</h3>
                        <p>B·∫°n ƒë√£ ho√†n th√†nh tr√≤ ch∆°i. Ch√∫c b·∫°n m·ªôt ng√†y 8/3 tr√†n ƒë·∫ßy ni·ªÅm vui!</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="message-section">
                <h2>Nh·ªØng m√≥n qu√† 8/3 tr√™n th·∫ø gi·ªõi</h2>
                <p class="text-center mb-4">H√£y kh√°m ph√° c√°c phong t·ª•c t·∫∑ng qu√† ng√†y Qu·ªëc t·∫ø Ph·ª• n·ªØ tr√™n kh·∫Øp th·∫ø gi·ªõi</p>

                <div class="world-map-container">
                    <div class="world-map">
                        <!-- C√°c ƒëi·ªÉm ƒë√°nh d·∫•u tr√™n b·∫£n ƒë·ªì -->
                        <div class="map-marker" data-country="italy" style="top: 37%; left: 51%;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="map-marker" data-country="russia" style="top: 25%; left: 70%;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="map-marker" data-country="japan" style="top: 39%; left: 83%;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="map-marker" data-country="brazil" style="top: 65%; left: 35%;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="map-marker" data-country="vietnam" style="top: 50%; left: 78%;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="map-marker" data-country="usa" style="top: 36%; left: 22%;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>

                        <!-- H√¨nh ·∫£nh b·∫£n ƒë·ªì -->
                        <img src="https://media1.giphy.com/media/LQo5HzZnmZQ74Uc8tI/giphy.gif" alt="World Map" class="img-fluid">
                    </div>

                    <div class="country-info" id="country-info">
                        <div class="country-card" id="italy-card">
                            <h4><span class="flag">üáÆüáπ</span> √ù (Italy)</h4>
                            <p>Ph·ª• n·ªØ √ù th∆∞·ªùng ƒë∆∞·ª£c t·∫∑ng b√≥ hoa mimosa v√†ng r·ª±c r·ª° v√†o ng√†y 8/3. Lo√†i hoa n√†y ƒë√£ tr·ªü th√†nh bi·ªÉu t∆∞·ª£ng c·ªßa ng√†y Qu·ªëc t·∫ø Ph·ª• n·ªØ t·∫°i ƒë·∫•t n∆∞·ªõc n√†y t·ª´ sau Th·∫ø chi·∫øn 2.</p>
                        </div>
                        <div class="country-card" id="russia-card">
                            <h4><span class="flag">üá∑üá∫</span> Nga (Russia)</h4>
                            <p>T·∫°i Nga, ng√†y 8/3 l√† ng√†y l·ªÖ ch√≠nh th·ª©c. ƒê√†n √¥ng th∆∞·ªùng t·∫∑ng hoa tulip, chocolate v√† th·∫ª qu√† t·∫∑ng. Nhi·ªÅu gia ƒë√¨nh c√≤n t·ªï ch·ª©c ti·ªác ƒë·ªÉ t√¥n vinh nh·ªØng ng∆∞·ªùi ph·ª• n·ªØ.</p>
                        </div>
                        <div class="country-card" id="japan-card">
                            <h4><span class="flag">üáØüáµ</span> Nh·∫≠t B·∫£n (Japan)</h4>
                            <p>·ªû Nh·∫≠t, ng√†y 8/3 kh√¥ng ph·ªï bi·∫øn nh∆∞ White Day (14/3) - ng√†y nam gi·ªõi t·∫∑ng qu√† ƒë√°p l·∫°i m√≥n qu√† Valentine h·ªç nh·∫≠n ƒë∆∞·ª£c. Tuy nhi√™n, m·ªôt s·ªë c√¥ng ty t·ªï ch·ª©c s·ª± ki·ªán ƒë·∫∑c bi·ªát cho nh√¢n vi√™n n·ªØ.</p>
                        </div>
                        <div class="country-card" id="brazil-card">
                            <h4><span class="flag">üáßüá∑</span> Brazil</h4>
                            <p>Ph·ª• n·ªØ Brazil th∆∞·ªùng ƒë∆∞·ª£c t·∫∑ng hoa h·ªìng v√† chocolate. Nhi·ªÅu s·ª± ki·ªán √¢m nh·∫°c, ngh·ªá thu·∫≠t c≈©ng ƒë∆∞·ª£c t·ªï ch·ª©c ƒë·ªÉ n√¢ng cao nh·∫≠n th·ª©c v·ªÅ c√°c v·∫•n ƒë·ªÅ ph·ª• n·ªØ.</p>
                        </div>
                        <div class="country-card" id="vietnam-card">
                            <h4><span class="flag">üáªüá≥</span> Vi·ªát Nam</h4>
                            <p>T·∫°i Vi·ªát Nam, ph·ª• n·ªØ th∆∞·ªùng ƒë∆∞·ª£c t·∫∑ng hoa, qu√† v√† nh·ªØng l·ªùi ch√∫c t·ªët ƒë·∫πp. Nhi·ªÅu c√¥ng ty t·ªï ch·ª©c ti·ªác v√† ph√°t qu√† cho nh√¢n vi√™n n·ªØ. C√°c c·ª≠a h√†ng hoa th∆∞·ªùng r·∫•t ƒë√¥ng ƒë√∫c v√†o ng√†y n√†y.</p>
                        </div>
                        <div class="country-card" id="usa-card">
                            <h4><span class="flag">üá∫üá∏</span> Hoa K·ª≥ (USA)</h4>
                            <p>Trong khi ng√†y 8/3 kh√¥ng ph·∫£i l√† ng√†y l·ªÖ ch√≠nh th·ª©c ·ªü M·ªπ, nhi·ªÅu ng∆∞·ªùi M·ªπ v·∫´n k·ª∑ ni·ªám b·∫±ng c√°ch t·∫∑ng hoa, th·∫ª qu√† t·∫∑ng ho·∫∑c t·ªï ch·ª©c c√°c s·ª± ki·ªán t√¥n vinh nh·ªØng ng∆∞·ªùi ph·ª• n·ªØ ƒë√£ t·∫°o n√™n s·ª± kh√°c bi·ªát.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Music Control -->
        <div id="music-control">
            <i class="fas fa-volume-mute" id="music-icon"></i>
        </div>

        <!-- Audio Element -->
        <audio id="background-music" loop>
            <source src="/honcayeu.mp3" type="audio/mpeg">
        </audio>
        <!-- Footer -->
        <footer>
            <p>&copy; 2025 - Happy Women Day</p>
        </footer>

        <!-- Bootstrap JS, Popper and jQuery -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.min.js"></script>

        <script>
             $(document).ready(function () {
                // T·ª± ƒë·ªông ph√°t nh·∫°c khi trang web ƒë∆∞·ª£c t·∫£i
                let playing = true;
                
                // H√†m ph√°t nh·∫°c
                function playMusic() {
                    // C·ªë g·∫Øng ph√°t nh·∫°c
                    var playPromise = $("#background-music")[0].play();
                    
                    // X·ª≠ l√Ω tr∆∞·ªùng h·ª£p tr√¨nh duy·ªát ch·∫∑n t·ª± ƒë·ªông ph√°t
                    if (playPromise !== undefined) {
                        playPromise.then(_ => {
                            playing = true;
                            $("#music-icon").removeClass("fa-volume-up").addClass("fa-volume-mute");
                        })
                        .catch(error => {
                            // T·ª± ƒë·ªông ph√°t b·ªã ch·∫∑n
                            playing = false;
                            $("#music-icon").removeClass("fa-volume-mute").addClass("fa-volume-up");
                            console.log("Autoplay prevented by browser: ", error);
                        });
                    }
                }
                
                // G·ªçi h√†m ƒë·ªÉ ph√°t nh·∫°c khi trang web t·∫£i xong
                playMusic();
                
                // Intro animation and transition
                $("#start-btn").click(function () {
                    $("#intro").fadeOut(1000);
                    setTimeout(function () {
                        $("#main-content").css("opacity", "1");
                        $("#music-control").css("opacity", "1");
                        animateElements();
                        
                        // Th·ª≠ ph√°t nh·∫°c l·∫°i n·∫øu n√≥ ch∆∞a ph√°t (sau t∆∞∆°ng t√°c ng∆∞·ªùi d√πng)
                        if (!playing) {
                            playMusic();
                        }
                    }, 1000);
                });

                // Card flip animation
                $("#greeting-card").click(function () {
                    $(this).toggleClass("open");
                });

                // Music control
                $("#music-control").click(function () {
                    if (!playing) {
                        $("#background-music")[0].play();
                        $("#music-icon").removeClass("fa-volume-up").addClass("fa-volume-mute");
                        playing = true;
                    } else {
                        $("#background-music")[0].pause();
                        $("#music-icon").removeClass("fa-volume-mute").addClass("fa-volume-up");
                        playing = false;
                    }
                });

                // Function to animate elements as they come into view
                function animateElements() {
                    // Gallery items fade in
                    $(".gallery-item").each(function (index) {
                        $(this).addClass("animate__animated animate__fadeInUp");
                        $(this).css("animation-delay", (index * 0.1) + "s");
                    });

                    // Message section floats in
                    $(".message-section").addClass("animate__animated animate__fadeIn");
                }
            });

            $(document).ready(function () {
                // T·∫°o tr√≤ ch∆°i gh√©p h√¨nh v·ªõi 9 m·∫£nh (3x3)
                const puzzleSize = 3;
                const containerWidth = 300;
                const pieceWidth = containerWidth / puzzleSize;
                let pieces = [];
                let solved = false;

                // T·∫°o c√°c m·∫£nh gh√©p
                function createPuzzle(imageSrc = "./uploads/img1.png") {
                    const puzzleContainer = $("#puzzle");
                    puzzleContainer.empty();
                    pieces = [];

                    for (let row = 0; row < puzzleSize; row++) {
                        for (let col = 0; col < puzzleSize; col++) {
                            const pieceIndex = row * puzzleSize + col;
                            const piece = $("<div>")
                                    .addClass("puzzle-piece")
                                    .css({
                                        width: pieceWidth + "px",
                                        height: pieceWidth + "px",
                                        backgroundImage: `url(${imageSrc})`,
                                        backgroundPosition: `-${col * pieceWidth}px -${row * pieceWidth}px`
                                    })
                                    .attr("data-index", pieceIndex);

                            pieces.push({
                                element: piece,
                                currentIndex: pieceIndex,
                                correctIndex: pieceIndex
                            });

                            puzzleContainer.append(piece);
                        }
                    }

                    positionPieces();
                    shufflePuzzle();

                    // X·ª≠ l√Ω s·ª± ki·ªán click v√†o m·∫£nh gh√©p
                    $(".puzzle-piece").click(function () {
                        if (solved)
                            return;

                        const clickedIndex = parseInt($(this).attr("data-index"));
                        const piece = pieces.find(p => p.currentIndex === clickedIndex);

                        // T√¨m m·ªôt m·∫£nh gh√©p kh√°c g·∫ßn ƒë√≥ ƒë·ªÉ ƒë·ªïi ch·ªó
                        const emptyNeighbor = findEmptyNeighbor(clickedIndex);
                        if (emptyNeighbor !== -1) {
                            // ƒê·ªïi ch·ªó hai m·∫£nh gh√©p
                            const neighborPiece = pieces.find(p => p.currentIndex === emptyNeighbor);

                            // ƒê·∫£m b·∫£o t√¨m th·∫•y c·∫£ hai m·∫£nh gh√©p
                            if (piece && neighborPiece) {
                                const tempIndex = piece.currentIndex;
                                piece.currentIndex = neighborPiece.currentIndex;
                                neighborPiece.currentIndex = tempIndex;

                                positionPieces();
                                checkCompletion();
                            }
                        }
                    });
                }

                // V·ªã tr√≠ c√°c m·∫£nh gh√©p d·ª±a tr√™n currentIndex
                function positionPieces() {
                    pieces.forEach(piece => {
                        const row = Math.floor(piece.currentIndex / puzzleSize);
                        const col = piece.currentIndex % puzzleSize;

                        piece.element.css({
                            top: row * pieceWidth + "px",
                            left: col * pieceWidth + "px"
                        });

                        // ƒê√°nh d·∫•u c√°c m·∫£nh gh√©p ƒë√£ ƒë√∫ng v·ªã tr√≠
                        if (piece.currentIndex === piece.correctIndex) {
                            piece.element.addClass("correct");
                        } else {
                            piece.element.removeClass("correct");
                        }
                    });
                }

                // T√¨m m·∫£nh gh√©p tr·ªëng g·∫ßn m·∫£nh hi·ªán t·∫°i
                function findEmptyNeighbor(index) {
                    const row = Math.floor(index / puzzleSize);
                    const col = index % puzzleSize;

                    // Ki·ªÉm tra 4 h∆∞·ªõng (tr√™n, d∆∞·ªõi, tr√°i, ph·∫£i)
                    const neighbors = [
                        row > 0 ? index - puzzleSize : -1, // Tr√™n
                        row < puzzleSize - 1 ? index + puzzleSize : -1, // D∆∞·ªõi
                        col > 0 ? index - 1 : -1, // Tr√°i
                        col < puzzleSize - 1 ? index + 1 : -1           // Ph·∫£i
                    ];

                    // L·ªçc b·ªè v·ªã tr√≠ kh√¥ng h·ª£p l·ªá (-1)
                    const validNeighbors = neighbors.filter(n => n !== -1);

                    // N·∫øu c√≥ h√†ng x√≥m h·ª£p l·ªá, ch·ªçn m·ªôt ng·∫´u nhi√™n
                    if (validNeighbors.length > 0) {
                        return validNeighbors[Math.floor(Math.random() * validNeighbors.length)];
                    }

                    return -1;
                }

                // Tr·ªôn c√°c m·∫£nh gh√©p
                function shufflePuzzle() {
                    solved = false;
                    $("#completion").hide();

                    // Tr·ªôn m·∫£nh gh√©p b·∫±ng c√°ch ƒë·ªïi ch·ªó ng·∫´u nhi√™n nhi·ªÅu l·∫ßn
                    for (let i = 0; i < 50; i++) {
                        const randomIndex1 = Math.floor(Math.random() * pieces.length);
                        const randomIndex2 = Math.floor(Math.random() * pieces.length);

                        const temp = pieces[randomIndex1].currentIndex;
                        pieces[randomIndex1].currentIndex = pieces[randomIndex2].currentIndex;
                        pieces[randomIndex2].currentIndex = temp;
                    }

                    positionPieces();
                }

                // Ki·ªÉm tra xem puzzle ƒë√£ ho√†n th√†nh ch∆∞a
                function checkCompletion() {
                    const isComplete = pieces.every(piece => piece.currentIndex === piece.correctIndex);

                    if (isComplete) {
                        solved = true;
                        $("#completion").fadeIn(500);
                        $(".puzzle-piece").addClass("correct");

                        // Hi·ªáu ·ª©ng ho√†n th√†nh
                        setTimeout(() => {
                            $(".puzzle-piece").addClass("animate__animated animate__pulse");
                        }, 500);
                    }
                }

                // Gi·∫£i puzzle
                function solvePuzzle() {
                    pieces.forEach(piece => {
                        piece.currentIndex = piece.correctIndex;
                    });

                    positionPieces();
                    solved = true;
                    $("#completion").fadeIn(500);
                }

                // Kh·ªüi t·∫°o puzzle
                createPuzzle();

                // X·ª≠ l√Ω n√∫t shuffle
                $("#shuffle-btn").click(function () {
                    shufflePuzzle();
                });

                // X·ª≠ l√Ω n√∫t solve
                $("#solve-btn").click(function () {
                    solvePuzzle();
                });
            });
            $(document).ready(function () {
                // Hi·ªÉn th·ªã th√¥ng tin qu·ªëc gia khi nh·∫•p v√†o marker
                $(".map-marker").click(function () {
                    const country = $(this).data("country");
                    $(".country-card").removeClass("active").fadeOut(300);

                    setTimeout(function () {
                        $(`#${country}-card`).addClass("active").fadeIn(300);
                    }, 300);
                });

                // M·∫∑c ƒë·ªãnh hi·ªÉn th·ªã Vi·ªát Nam
                $("#vietnam-card").addClass("active").show();
            });
        </script>
    </body>
</html>